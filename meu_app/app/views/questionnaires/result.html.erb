<h1 class="text-3xl font-bold mb-6 text-center"><%= @questionnaire.title %> - Resultado</h1>

<% 
  answers = current_user.user_answer_histories.where(questionnaire: @questionnaire)
  total_questions = @questionnaire.questions.count
  correct_answers = answers.select { |a| a.is_correct }.count
  percentage = ((correct_answers.to_f / total_questions) * 100).round(2)
%>

<% if total_questions > 0 %>
  <p class="text-lg text-center mb-4">
    Você acertou <strong><%= correct_answers %></strong> de <strong><%= total_questions %></strong> questões.
  </p>
  <p class="text-lg text-center">
    Pontuação: <strong><%= percentage %> %</strong>
  </p>
<% else %>
  <p class="text-center text-red-600 font-semibold">
    Nenhuma resposta registrada. Por favor, responda o questionário primeiro.
  </p>
<% end %>

<div class="mt-6 text-center">
  <%= link_to "Voltar aos Questionários", questionnaires_path, class: "bg-pink-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-pink-700" %>
</div>
